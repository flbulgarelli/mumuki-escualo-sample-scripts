# desktop Atheneum is a low-level resources installation
# that lets you run it in a end-user machine, packaged in a vm
#
# See https://github.com/mumuki/mumuki-desktop
local:
 - bootstrap --monit-password <MONIT_PASSWORD>
remote:
 - env set SECRET_KEY_BASE=<SECRET>
           PGDATABASE=atheneum
           POSTGRESQL_DB_USERNAME=<POSTGRE_USERNAME>
           POSTGRESQL_DB_PASSWORD=<POSTGRE_PASSWORD>
           POSTGRESQL_DB_HOST=localhost
           MUMUKI_QUEUELESS_MODE=true
           MUMUKI_SINGLE_USER_MODE=true
 - plugin install postgre # should be sqlite in the future
 - artifact create service atheneum 80
 - rake atheneum 'db:create db:schema:load db:seed'
deploy:
 - deploy atheneum mumuki/mumuki-atheneum

